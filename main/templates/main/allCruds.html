
 {% load static %} 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="{% static "css/allCruds.css" %}">
    <title>Birdy</title>
    <link rel="icon" href="/assets/Passaro_Birdy.png" type="image/x-icon">
</head>
<body>
    <div class="cont" id="blur">
        <header class="header">
            <a href="{% url 'uc' %}"><img src="{% static 'assets/logo.png' %}" class="logo"></img></a>
            <nav class="header-navigation">
                <ul class="nav-links">
                    <li class="nav"><a class="nav-text" href="{% url 'cursos' %}">Cursos</a></li>
                    <li class="nav"><a class="nav-text" href="{% url 'forum' %}">Forum</a></li>
                    <li class="nav"><a class="nav-text" href="{% url 'perfil' %}">Perfil</a></li>
                </ul>
            </nav>
            <form method="POST" action="{% url 'logout' %}">
                {% csrf_token %}
                <a type="submit" class="logout"><button>Logout</button></a>
            </form>
        </header>

        <div class="container">
            <div class="wrapper">
                <h1>Inserir Exercício</h1>
                <a href="#" onclick="toggle()" class="add-button">&plus;</a>
            </div>

            <div class="wrapper">
                <h1>Inserir Questao</h1>
                <a href="#" onclick="toggleEdit()" class="add-button">&plus;</a>
            </div>

            <div class="wrapper">
                <h1>Inserir Resposta</h1>
                <a href="#" onclick="toggleP()" class="add-button">&plus;</a>
            </div>
        </div>

        <div class="container">
            <!-- Lista de Perguntas -->
            <h1 class="tituloCRUD">Lista de Exercicios</h1>
            <ul>
                {% for pergunta in perguntas %}
                    <li>
                        <p class="textQuestion" >{{ pergunta.pergunta_texto }} </p>
                        <a class="edit" href="{% url 'editar_pergunta' pergunta.id %}">Editar</a>
                        <a class="delete"href="{% url 'deletar_pergunta' pergunta.id %}">Deletar</a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <div class="container">
            <h1 class="tituloCRUD">Lista de Questões</h1>
            <ul>
                {% for questao in questoes %}
                    <li>
                        <p class="textQuestion" >{{ questao.pergunta }}</p>
                        <a class="edit" href="{% url 'editar_questao' questao.id %}">Editar</a>
                        <a class="delete" href="{% url 'deletar_questao' questao.id %}">Deletar</a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <div class="container">
            <h1 class="tituloCRUD">Lista de Respostas</h1>
            {% for questao in questoes %}
                <h2 class="questaoCRUD">Questão: {{ questao.pergunta }}</h2>
                <ul>
                    {% for resposta in questao.respostas.all %}
                        <li>
                            <p class="textQuestion" > <span class="resposta">Resposta:</span> {{ resposta.resposta }}</p>
                            <a class="edit" href="{% url 'editar_resposta' resposta_id=resposta.id %}">Editar</a>
                            <a class="delete"href="{% url 'deletar_resposta' resposta_id=resposta.id %}">Deletar</a>
                        </li>
                    {% endfor %}
                    
                </ul>
            {% endfor %}
        </div>

    </div>

    <div class="popup" id="popup-insert">

        <a href="#" onclick="toggle()"><img src="{% static "assets/Seta_2.png" %}" class="arrow"></a>
        <!-- Formulário para criar uma nova pergunta -->
        <form class="popup-form" method="POST" action="{% url 'crud_perguntas' %}" enctype="multipart/form-data">
            {% csrf_token %} 

            <label for="Pergunta_texto"></label>
            <input type="text" name="Pergunta" id="pergunta" placeholder="Titulo" >
           
            <div class="samerow-form">
                <label for="Imagem">Imagem:</label>
                <input type="file" name="Imagem" accept="image/*" placeholder="Pergunta">
            </div>
            
            <label for="Resposta1"></label>
            <input type="text" name="Resposta1" id="Resposta1" placeholder="Alternativa 1">
           

            <label for="Resposta2"></label>
            <input type="text" name="Resposta2" id="Resposta2" placeholder="Alternativa 2" >
           

            <label for="Resposta3"></label>
            <input type="text" name="Resposta3" id="Resposta3" placeholder="Alternativa 3" >
            

            <label for="Resposta4"></label>
            <input type="text" name="Resposta4" id="Resposta4" placeholder="Alternativa 4">
            

            <label for="Resposta4"></label>
            <input type="text" name="RespostaCorreta" id="RespostaCorreta" placeholder="Resposta">
            
            
            <div class="samerow-form">
                <label for="Solucao">Solução:</label>
                <input type="file" name="Solucao" accept="image/*">
            </div>

            <label for="Categoria">Categoria:</label>
            <select type="text" name="Categoria">
                <option value="geometria_plana">Geometria Plana</option>
                <option value="operacoes_basicas">Operações Básicas</option>
                <option value="fracoes">Frações</option>
                <option value="porcentagens">Porcentagens</option>
            </select>
        

            <button type="submit">Criar Exercício</button>
        </form>
    </div>

    <div class="popup-edit" id="popup-edit">

        <a href="#" onclick="toggleEdit()"><img src="{% static "assets/Seta_2.png" %}" class="arrow"></a>
        <!-- Formulário para criar uma nova pergunta -->
        <h1>Inserir Questão</h1>
        <form class="popup-form" method="POST" action="{% url 'criar_questao' %}">
            {% csrf_token %}
        
            <label for="topico">Tópico:</label>
            <select name="topico" required>
                {% for topico in topicos %}
                    <option value="{{ topico.id }}">{{ topico.nome }}</option>
                {% endfor %}
            </select><br>
        
            <label for="pergunta">Pergunta:</label>
            <textarea name="pergunta" required></textarea><br>
        
            <button type="submit">Adicionar Questão</button>
        </form>
    </div>

    <div class="popup-p" id="popup-p">

        <a href="#" onclick="toggleP()"><img src="{% static "assets/Seta_2.png" %}" class="arrow"></a>
        <!-- Formulário para criar uma nova pergunta -->
        <h1>Inserir Resposta</h1>



        {% for questao in questoes %}
        <h2>Questão: {{ questao.pergunta }}</h2>
    
        <form class="popup-form" method="POST" action="{% url 'criar_resposta' questao_id=questao.id %}">
            {% csrf_token %}
            
            <label for="resposta">Resposta:</label>
            <textarea name="resposta" required></textarea>

            <button type="submit">Adicionar Resposta</button>
        </form>
        {% endfor %}

    </div>
  
</body>
<script type="text/javascript">
    function toggle(){
        var blur = document.getElementById('blur');
        blur.classList.toggle('active')
        var popupInsert = document.getElementById('popup-insert');
        popupInsert.classList.toggle('active')
    }

    function toggleEdit(){
        var blur = document.getElementById('blur');
        blur.classList.toggle('active')
        var popupEdit = document.getElementById('popup-edit');
        popupEdit.classList.toggle('active')
    }

    function toggleP(){
        var blur = document.getElementById('blur');
        blur.classList.toggle('active')
        var popupP = document.getElementById('popup-p');
        popupP.classList.toggle('active')
    }
</script>

</html>
